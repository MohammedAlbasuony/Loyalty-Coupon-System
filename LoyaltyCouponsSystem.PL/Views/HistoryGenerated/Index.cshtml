@model IEnumerable<Product>

@{
    ViewData["Title"] = "All Product";
    Layout = "~/Views/Shared/_LayoutCoupon.cshtml";
}

<div class="container">
    <h3 class="text-primary">Coupons</h3>
    <hr />

    <table id="CouponsTable" class="table table-striped table-bordered dt-responsive nowrap">
        <thead>
            <tr>
                <th>Serial Number</th>
                <th>Type Of Coupon</th>
                <th>Status</th>
                <th>Value</th>
                <th>Governorate Id</th>
                <th>Area Id</th>
                <th>Order In Year</th>
                <th>Creation Date</th>
                
            </tr>
        </thead>
    </table>
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#CouponsTable').DataTable({
                processing: true,
                serverSide: true,
                ajax: {
                    url: '/Coupon/GetCoupon', // الأكشن الذي يعيد الـ JSON
                    type: 'POST',
                    datatype: 'json'
                },
                columns: [
                    { data: 'serialNumber', name: 'Serial Number' }, // الرقم التسلسلي
                    { data: 'typeOfCoupone', name: 'Type Of Coupon' }, // نوع الكوبون
                    { data: 'status', name: 'Status' }, // الحالة
                    { data: 'value', name: 'Value' }, // القيمة
                    { data: 'governorateId', name: 'Governorate Id' }, // معرف المحافظة
                    { data: 'areaId', name: 'Area Id' }, // معرف المنطقة
                    { data: 'numInYear', name: 'Order In Year' }, // رقم الطلب في السنة
                    {
                        data: 'creationDateTime',
                        name: 'Creation Date',
                        render: function (data) {
                            // تحويل التاريخ إلى تنسيق مناسب
                            var date = new Date(data);
                            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                        }
                    }
                ],
                dom: 'Blfrtip',
                buttons: ['copy', 'excel', 'csv', 'pdf', 'print'],
                paging: true,
                searching: true,
                ordering: true
            });
        });
    </script>

}
